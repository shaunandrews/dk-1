{
  "$schema": "./schemas/dk.config.schema.json",
  "version": "1.0.0",
  "name": "Automattic Design Kit",
  "description": "Cross-repository design and prototyping environment for WordPress ecosystem",
  
  "repositories": {
    "calypso": {
      "path": "repos/calypso",
      "name": "Calypso",
      "description": "WordPress.com custom dashboard and apps",
      "upstream": "https://github.com/Automattic/wp-calypso",
      "defaultBranch": "trunk",
      "nodeVersion": "22.9.0",
      "packageManager": "yarn",
      "stack": {
        "language": "TypeScript",
        "framework": "React",
        "styling": "SCSS",
        "stateManagement": "Redux"
      },
      "paths": {
        "components": "client/components",
        "pages": "client/my-sites",
        "layouts": "client/layout",
        "blocks": "client/blocks",
        "lib": "client/lib",
        "state": "client/state",
        "packages": "packages",
        "designSystem": "apps/design-system-docs",
        "assets": "static/images",
        "styles": "client/assets/stylesheets"
      },
      "devServer": {
        "command": "yarn start:debug",
        "port": 3000,
        "url": "http://calypso.localhost:3000"
      },
      "aiContext": ["CLAUDE.md", "AGENTS.md"]
    },
    
    "gutenberg": {
      "path": "repos/gutenberg",
      "name": "Gutenberg",
      "description": "WordPress Block Editor and component library",
      "upstream": "https://github.com/WordPress/gutenberg",
      "defaultBranch": "trunk",
      "nodeVersion": "20",
      "packageManager": "npm",
      "stack": {
        "language": "JavaScript/TypeScript",
        "framework": "React",
        "styling": "SCSS",
        "stateManagement": "@wordpress/data"
      },
      "paths": {
        "components": "packages/components/src",
        "blocks": "packages/block-library/src",
        "blockEditor": "packages/block-editor/src",
        "editor": "packages/editor/src",
        "data": "packages/data/src",
        "icons": "packages/icons/src",
        "primitives": "packages/primitives/src",
        "packages": "packages",
        "storybook": "storybook",
        "phpLib": "lib"
      },
      "devServer": {
        "command": "npm run dev",
        "port": 9999,
        "url": "http://localhost:9999"
      },
      "aiContext": ["AGENTS.md"]
    },
    
    "wordpress-core": {
      "path": "repos/wordpress-core",
      "name": "WordPress Core",
      "description": "Core WordPress software (development repository)",
      "upstream": "https://github.com/WordPress/wordpress-develop",
      "defaultBranch": "trunk",
      "nodeVersion": "20",
      "packageManager": "npm",
      "stack": {
        "language": "PHP",
        "framework": "WordPress",
        "styling": "CSS",
        "database": "SQLite (Playground runtime)"
      },
      "paths": {
        "admin": "src/wp-admin",
        "includes": "src/wp-includes",
        "content": "src/wp-content",
        "themes": "src/wp-content/themes",
        "plugins": "src/wp-content/plugins",
        "js": "src/js/_enqueues",
        "restApi": "src/wp-includes/rest-api",
        "blocks": "src/wp-includes/blocks"
      },
      "devServer": {
        "command": "wp-env start --runtime=playground",
        "port": 8889,
        "url": "http://localhost:8889"
      },
      "wpEnvConfig": "configs/wp-env-core.json",
      "aiContext": []
    },
    
    "ciab": {
      "path": "repos/ciab",
      "name": "Commerce in a Box (CIAB)",
      "description": "Commerce in a Box admin interface",
      "upstream": "https://github.a8c.com/Automattic/ciab-admin",
      "defaultBranch": "trunk",
      "nodeVersion": "22",
      "packageManager": "pnpm",
      "stack": {
        "language": "TypeScript",
        "framework": "React",
        "styling": "SCSS",
        "stateManagement": "Redux"
      },
      "paths": {
        "routes": "wordpress/plugins/ciab-admin/routes",
        "packages": "wordpress/plugins/ciab-admin/packages",
        "fields": "wordpress/plugins/ciab-admin/fields",
        "plugins": "wordpress/plugins",
        "docs": "docs"
      },
      "devServer": {
        "command": "pnpm dev",
        "port": 9001,
        "url": "http://localhost:9001/wp-admin/"
      },
      "aiContext": []
    },
    
    "jetpack": {
      "path": "repos/jetpack",
      "name": "Jetpack",
      "description": "Security, performance, marketing, and design tools for WordPress",
      "upstream": "https://github.com/Automattic/jetpack",
      "defaultBranch": "trunk",
      "nodeVersion": "22",
      "packageManager": "pnpm",
      "stack": {
        "language": "PHP/TypeScript",
        "framework": "WordPress Plugin",
        "styling": "SCSS",
        "stateManagement": "@wordpress/data"
      },
      "paths": {
        "mainPlugin": "projects/plugins/jetpack",
        "plugins": "projects/plugins",
        "packages": "projects/packages",
        "jsPackages": "projects/js-packages",
        "tools": "tools",
        "docs": "docs"
      },
      "devServer": {
        "command": "pnpm run watch",
        "port": null,
        "url": "http://localhost:8889/wp-admin/plugins.php",
        "note": "Jetpack runs within WordPress Core environment"
      },
      "aiContext": ["AGENTS.md"]
    },
    
    "telex": {
      "path": "repos/telex",
      "name": "Telex",
      "description": "AI-powered WordPress Gutenberg block authoring environment",
      "upstream": "https://github.a8c.com/Automattic/w0-block-authoring",
      "defaultBranch": "main",
      "nodeVersion": "22",
      "packageManager": "pnpm",
      "stack": {
        "language": "TypeScript/PHP",
        "framework": "React (Vite)",
        "styling": "Tailwind CSS",
        "stateManagement": "Zustand",
        "routing": "TanStack Router"
      },
      "paths": {
        "client": "client",
        "components": "client/src/components",
        "routes": "client/src/routes",
        "hooks": "client/src/hooks",
        "contexts": "client/src/contexts",
        "server": "server",
        "cli": "cli",
        "spec": "spec",
        "admin": "admin",
        "docs": "docs"
      },
      "devServer": {
        "command": "pnpm run dev",
        "ports": {
          "client": 3000,
          "server": 8000
        },
        "url": "http://localhost:3000",
        "note": "Requires MinIO for S3 storage: pnpm run minio:start"
      },
      "aiContext": ["CLAUDE.md"]
    }
  },
  
  "connections": {
    "calypso-gutenberg": {
      "description": "Calypso embeds Gutenberg editor for post/page editing",
      "integration": "Calypso loads Gutenberg via @wordpress/block-editor and @wordpress/components",
      "sharedPackages": [
        "@wordpress/components",
        "@wordpress/icons",
        "@wordpress/data",
        "@wordpress/element"
      ]
    },
    "gutenberg-core": {
      "description": "Gutenberg is bundled into WordPress Core",
      "integration": "Gutenberg packages sync to Core via the release process",
      "syncPath": "src/wp-includes/blocks"
    },
    "calypso-core": {
      "description": "Calypso communicates with WordPress via REST API",
      "integration": "REST API endpoints at /wp-json/wp/v2/",
      "apiBase": "/wp-json/wp/v2/"
    },
    "jetpack-core": {
      "description": "Jetpack plugin runs within WordPress Core environment",
      "integration": "Mounted via .wp-env.json plugin path (no Docker required)",
      "wpEnvConfig": "configs/wp-env-jetpack.json"
    },
    "jetpack-calypso": {
      "description": "Jetpack connects self-hosted WordPress sites to WordPress.com via Calypso",
      "integration": "Jetpack API endpoints consumed by Calypso for site management",
      "apiBase": "/wp-json/jetpack/v4/"
    },
    "telex-gutenberg": {
      "description": "Telex generates Gutenberg blocks using the block API",
      "integration": "Telex outputs WordPress block plugins compatible with Gutenberg block-library patterns",
      "sharedPackages": [
        "@wordpress/blocks",
        "@wordpress/block-editor",
        "@wordpress/components",
        "@wordpress/icons"
      ]
    },
    "telex-playground": {
      "description": "Telex uses WordPress Playground for live block preview",
      "integration": "@wp-playground/client for in-browser WordPress environment",
      "note": "Blocks are previewed in an isolated WordPress Playground instance"
    }
  },
  
  "componentLibraries": {
    "primary": {
      "name": "@wordpress/components",
      "repo": "gutenberg",
      "path": "packages/components/src",
      "storybook": "https://wordpress.github.io/gutenberg/?path=/docs/components-introduction--docs",
      "description": "Primary component library used across WordPress ecosystem"
    },
    "calypsoComponents": {
      "name": "Calypso Components",
      "repo": "calypso",
      "path": "client/components",
      "designSystem": "apps/design-system-docs",
      "description": "Calypso-specific components for WordPress.com"
    },
    "icons": {
      "name": "@wordpress/icons",
      "repo": "gutenberg",
      "path": "packages/icons/src",
      "description": "WordPress icon library"
    }
  },
  
  "commands": {
    "findComponent": ".cursor/commands/find-component.md",
    "buildScreen": ".cursor/commands/build-screen.md",
    "prototype": ".cursor/commands/prototype.md",
    "git": ".cursor/commands/git.md",
    "crossRepo": ".cursor/commands/cross-repo.md"
  },
  
  "designer": {
    "preferredComponents": "@wordpress/components",
    "skipTechnicalDetails": true,
    "autoSuggestExisting": true,
    "simplifyGitWorkflows": true
  }
}
